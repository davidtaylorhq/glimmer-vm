<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Glimmer Test Suite</title>
</head>

<body>
  <script type="module">
    // Do this first so that `@glimmer/integration-tests` will see the global
    // `QUnit`. We should change the code structure here so that we don't
    // rely on the global to bootstrap QUnit, but this is fine for now.
    const QUnit = await import('qunit');
    QUnit.config.autostart = false;
  </script>
  <script type="module">
    import { setupQunit } from "@glimmer/integration-tests";
    await setupQunit();

    const packages =  await import.meta.glob("./packages/@glimmer/*/test/**/*-test.ts");

    // evaluate the tests before starting QUnit
    for (const pkg of Object.values(packages)) await pkg();

    QUnit.start();

  </script>

</body>

</html>
